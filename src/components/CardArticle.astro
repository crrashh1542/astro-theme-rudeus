---
interface Props {
    title: string
    description: string
    published: Date
    url: string
    tags?: string[]
    readingTime?: number
    readingChars?: number
}
const { title, description, published, url, tags = [], readingTime, readingChars } = Astro.props

import { Icon } from 'astro-icon/components'

const formatDate = (date: Date) => {
    return new Date(date).toLocaleDateString('zh-CN', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
    })
}
---

<a href={url} class="r-card">
    <div class="r-catalog">
        {title}
        <Icon name="mdi:navigate-next" width={36} height={36} class="r-icon" />
    </div>
    <p class="r-description">{description}</p>
    <div class="r-footer">
        <div class="r-info">
            <span>
                <Icon name="mdi:calendar-blank-outline" width={18} height={18} />
                {formatDate(published)}
            </span>
            <span>
                <Icon name="mdi:clock-outline" width={18} height={18} />
                {readingTime} 分钟</span>
            <span>
                <Icon name="mdi:pencil-outline" width={18} height={18} />
                {readingChars} 字</span>
        </div>
        {
            tags.length > 0 && (
                <div class="r-tags">
                    {tags.map((tag) => (
                        <span class="r-tag">#{tag}</span>
                    ))}
                </div>
            )
        }
    </div>
</a>

<style lang="less">
    @import url('@/styles/variables.less');
    .r-card {
        display: block;
        padding: 20px 0;
        border-bottom: 1px solid @color-border;

        .r-description {
            margin: 8px 0;
        }
    }
    .r-card:last-child {
        border-bottom: none;
    }
    .r-card:hover {
        .r-catalog {
            color: @color-theme;
        }
        .r-icon {
            opacity: 1;
            transform: translateX(4px);
        }
    }

    .r-catalog {
        display: flex;
        align-items: center;
        font-weight: 600;
        font-size: 24px;
        transition: all @anim-duration ease;

        .r-icon {
            opacity: 0;
            transform: translateX(-4px);
            transition: all @anim-duration ease;
        }
    }

    .r-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 12px;
        font-size: 0.9rem;
        color: @color-secondary;

        .r-info {
            display: flex;
            flex-direction: row;
            gap: 1.5em;

            span {
                display: flex;
                align-items: center;
                gap: 4px;
            }
        }
    }

    .r-tags {
        display: flex;
        gap: 0.75em;
        flex-wrap: wrap;

        .r-tag {
            background-color: @color-theme-light;
            color: @color-theme-dark;
            padding: 3px 9px;
            border-radius: 4px;
            font-size: 14px;
        }
    }
</style>
